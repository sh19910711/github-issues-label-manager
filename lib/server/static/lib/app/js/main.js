(function(){define("app/js/config",[],function(){return requirejs.config({paths:{"app/main":"app/js/main","app/application":"app/js/application","app/common":"app/js/common","app/repository":"app/js/repository","app/repositories":"app/js/repositories","app/page":"app/js/page","app/labels":"app/js/labels","app/label":"app/js/label","com/jquery/jquery.pjax":"com/jquery-pjax/js/jquery.pjax","com/bootstrap/bootstrap":"com/bootstrap/js/bootstrap","com/backbone/backbone-fetch-cache":"com/backbone-fetch-cache/js/backbone.fetch-cache","com/sprintf/sprintf":"com/sprintf/js/sprintf",jquery:"com/jquery/js/jquery",underscore:"com/underscore/js/underscore",backbone:"com/backbone/js/backbone-min"},shim:{"com/jquery/jquery.pjax":{exports:"jQuery.fn.pjax",deps:["jquery"]},"com/bootstrap/bootstrap":{exports:"undefined",deps:["jquery"]},"com/backbone/backbone-fetch-cache":{exports:"undefined",deps:["backbone"]},"com/sprintf/sprintf":{exports:"sprintf"},backbone:{exports:"Backbone",deps:["underscore"]},underscore:{exports:"_"}}}),{}})}).call(this),function(){define("app/common/utils",["underscore","jquery","app/common"],function(e,t,n){var r;return r=function(){function e(){}return e.get_csrf_token=function(){return t("meta[data-csrf-token]").data("csrf-token")},e.get_login_user=function(){return{github_user_id:t("meta[data-login-user-github-user-id]").data("login-user-github-user-id")}},e.get_root=function(){return window},e.request_api=function(e){return t.ajax({url:"/api/"+e,type:"POST",dataType:"json",data:{csrf_token:this.get_csrf_token()}})},e}()})}.call(this),function(){define("app/common",["./common/utils","com/sprintf/sprintf"],function(e,t){var n;return n=function(){function n(){}return n.Utils=e,n.sprintf=t,n}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("app/label/models/label",["underscore","jquery","backbone","app/common"],function(t,r,i,s){var o,u;return o=function(i){function o(){return this.get_color=e(this.get_color,this),this.set_color=e(this.set_color,this),this.resolve_color_code=e(this.resolve_color_code,this),u=o.__super__.constructor.apply(this,arguments),u}return n(o,i),o.prototype.urlRoot="/api/label",o.prototype.defaults={name:"",color:{r:0,g:0,b:0}},o.prototype.initialize=function(e){var t=this;return console.log("@Label::Models::Label#initialize"),this.on("change",function(){return t.set("color",t.resolve_color_code(t.get("color")))}),this},o.prototype.validate=function(){var e;e=this.get("color");if(!(e&&t(e).has("r")&&t(e).has("g")&&t(e).has("b")))return"color must have r, g, b props"},o.prototype.resolve_color_code=function(e){var t;if(typeof e!="string")return e;e=r.trim(e);if(!!e.match(/^#[0-9A-F]{6}$/))return t=e.match(/#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})/),{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)};if(!!e.match(/^[0-9A-F]{6}$/))return t=e.match(/([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})/),{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)};if(!!e.match(/^#[0-9A-F]{3}$/))return t=e.match(/#([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})/),{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16)};if(!!e.match(/^[0-9A-F]{3}$/))return t=e.match(/([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})/),{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16)}},o.prototype.set_color=function(e){return this.save({color:e})},o.prototype.get_color=function(){var e,t,n,r;return t=this.get("color"),r=s.sprintf("%02X",t.r),n=s.sprintf("%02X",t.g),e=s.sprintf("%02X",t.b),"#"+r+n+e},o}(i.Model)})}.call(this),function(){define("app/label/models",["./models/label"],function(e){var t;return t=function(){function t(){}return t.Label=e,t}()})}.call(this),function(){define("app/label",["./label/models"],function(e){var t;return t=function(){function t(){}return t.Models=e,t}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("app/labels/collections/labels",["underscore","jquery","backbone","app/common","app/label","com/backbone/backbone-fetch-cache"],function(t,r,i,s,o){var u,a;return u=function(r){function u(){return this.fetch_labels=e(this.fetch_labels,this),this.add_label=e(this.add_label,this),a=u.__super__.constructor.apply(this,arguments),a}return n(u,r),u.prototype.model=o.Models.Label,u.prototype.initialize=function(e){return t.bindAll(this,"add_label","fetch_labels"),this.github_user_id=e.github_user_id,this.github_repo_name=e.github_repo_name,this.url="/api/issues_label/"+this.github_user_id+"/"+this.github_repo_name,this},u.prototype.add_label=function(e){var t=this;return this.create({label_name:e.name,label_color:e.color,csrf_token:s.Utils.get_csrf_token()},{success:function(){var e;return e=i.fetchCache.getCacheKey(t),i.fetchCache.clearItem(e),t.fetch_labels()}})},u.prototype.fetch_labels=function(){var e=this;return this.fetch({cache:!0,data:{csrf_token:s.Utils.get_csrf_token()},url:"/api/issues_labels/"+this.github_user_id+"/"+this.github_repo_name,dataType:"json"}).done(function(n){return t(n).each(function(t){return e.add(t)}),e.trigger("fetch-end")})},u}(i.Collection),u})}.call(this),function(){define("app/labels/collections",["./collections/labels"],function(e){var t;return t=function(){function t(){}return t.Labels=e,t}()})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("app/labels/views/labels_view",["underscore","jquery","backbone","app/common"],function(e,n,r,i){var s,o;return s=function(n){function r(){return o=r.__super__.constructor.apply(this,arguments),o}return t(r,n),r.prototype.tagName="table",r.prototype.className="table table-striped",r.prototype.initialize=function(t){return e.bindAll(this,["render"]),this.collection.on("fetch-end",function(){return this.render()},this),this.collection.fetch_labels(),this},r.prototype.render=function(){return this.$el.empty(),this.collection.each(function(e){return this.$el.append("<tr><td>"+(""+e.get("name"))+"</td>"+"</tr>")},this),this},r}(r.View)})}.call(this),function(){define("app/labels/views",["./views/labels_view"],function(e){var t;return t=function(){function t(){}return t.LabelsView=e,t}()})}.call(this),function(){define("app/labels",["./labels/collections","./labels/views"],function(e,t){var n;return n=function(){function n(){}return n.Collections=e,n.Views=t,n}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("app/page/views/user_repo_view",["underscore","jquery","backbone","app/common","app/labels"],function(t,r,i,s,o){var u,a;return u=function(i){function s(){return this.event_add_label=e(this.event_add_label,this),this.event_update_labels=e(this.event_update_labels,this),a=s.__super__.constructor.apply(this,arguments),a}return n(s,i),s.prototype.id="page-view",s.prototype.initialize=function(e){return t.bindAll(this,"render","event_update_labels","event_add_label"),this.issues_labels=new o.Collections.Labels(e.issues_labels),this.issues_labels_view=new o.Views.LabelsView({collection:this.issues_labels})},s.prototype.events=function(){return{"click button.update":"event_update_labels","click .add button":"event_add_label"}},s.prototype.render=function(){return this.$el.empty(),this.$el.append('<div class="add form-inline"><div class="form-group"><label class="sr-only">New Label</label><input id="new-label-name" type="text" class="form-control" placeholder="New Label Name"></div><button type="submit" class="btn btn-primary">Add</button></div>'),this.$el.append("<hr>"),this.$el.append("<h3>Issues Labels</h3>"),this.$el.append(this.issues_labels_view.render().el),this},s.prototype.event_update_labels=function(){return this.issues_labels_view.collection.fetch_new_labels()},s.prototype.event_add_label=function(){var e;return e=r("input#new-label-name").val(),this.issues_labels.add_label.call(this.issues_labels,{name:e,color:"FF0000"})},s}(i.View),u})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("app/repository/models/repository",["underscore","jquery","backbone","app/common"],function(e,n,r,i){var s,o;return s=function(e){function n(){return o=n.__super__.constructor.apply(this,arguments),o}return t(n,e),n.prototype.defaults={full_name:"",id:"",name:""},n.prototype.initialize=function(e){return this},n}(r.Model)})}.call(this),function(){define("app/repository/models",["./models/repository"],function(e){var t;return t=function(){function t(){}return t.Repository=e,t}()})}.call(this),function(){define("app/repository",["./repository/models"],function(e){var t;return t=function(){function t(){}return t.Models=e,t}()})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("app/repositories/collections/repositories",["underscore","jquery","backbone","app/common","app/repository","com/backbone/backbone-fetch-cache"],function(e,n,r,i,s){var o,u;return o=function(n){function r(){return u=r.__super__.constructor.apply(this,arguments),u}return t(r,n),r.prototype.model=s.Models.Repository,r.prototype.initialize=function(e){return this.github_user_id=e.github_user_id,this},r.prototype.fetch_repos=function(){var t;return t=this,this.fetch({cache:!0,type:"get",data:{csrf_token:i.Utils.get_csrf_token()},url:"/api/repos/"+this.github_user_id,dataType:"json"}).done(function(n){return e(n).each(function(e){return t.add(e)}),t.trigger("fetch-end")})},r.prototype.fetch_new_repos=function(){var t;return t=this,this.fetch({type:"put",url:"/api/repos/"+this.github_user_id,data:{csrf_token:i.Utils.get_csrf_token()},dataType:"json"}).done(function(n){return e(n).each(function(e){return t.add(e)}),t.trigger("fetch-end")})},r}(r.Collection)})}.call(this),function(){define("app/repositories/collections",["./collections/repositories"],function(e){var t;return t=function(){function t(){}return t.Repositories=e,t}()})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("app/repositories/views/repositories_view",["underscore","jquery","backbone","app/common"],function(e,n,r,i){var s,o;return s=function(n){function r(){return o=r.__super__.constructor.apply(this,arguments),o}return t(r,n),r.prototype.tagName="table",r.prototype.className="table table-striped",r.prototype.initialize=function(t){return e.bindAll(this,["render"]),this.collection.on("fetch-end",function(){return this.render()},this),this.collection.fetch_repos(),this},r.prototype.render=function(){return this.$el.empty(),this.collection.each(function(e){return this.$el.append('<tr data-repo-id="'+e.get("id")+'"><td>'+("<a class='pjaxable' href=\"/repos/"+e.get("full_name")+'">')+(""+e.get("name"))+"</a></></tr>")},this),this},r}(r.View)})}.call(this),function(){define("app/repositories/views",["./views/repositories_view"],function(e){var t;return t=function(){function t(){}return t.RepositoriesView=e,t}()})}.call(this),function(){define("app/repositories",["./repositories/collections","./repositories/views"],function(e,t){var n;return n=function(){function n(){}return n.Collections=e,n.Views=t,n}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("app/page/views/user_repos_view",["underscore","jquery","backbone","app/common","app/repositories"],function(t,r,i,s,o){var u,a;return u=function(r){function i(){return this.render=e(this.render,this),this.update_user_repos=e(this.update_user_repos,this),a=i.__super__.constructor.apply(this,arguments),a}return n(i,r),i.prototype.id="page-view",i.prototype.events={"click button#update_user_repos":"update_user_repos"},i.prototype.initialize=function(e){return t.bindAll(this,"render"),this.repositories=new o.Collections.Repositories(e.repositories),this.repositories_view=new o.Views.RepositoriesView({collection:this.repositories})},i.prototype.update_user_repos=function(){return this.repositories.fetch_new_repos()},i.prototype.render=function(){return this.$el.append("<button id='update_user_repos' class='btn btn-primary'>Update Repositories</button>"),this.$el.append("<hr>"),this.$el.append(this.repositories_view.render().el),this},i}(i.View),u})}.call(this),function(){define("app/page/views",["./views/user_repo_view","./views/user_repos_view"],function(e,t){var n;return n=function(){function n(){}return n.UserRepoView=e,n.UserReposView=t,n}()})}.call(this),function(){define("app/page",["./page/views"],function(e){var t;return t=function(){function t(){}return t.Views=e,t}()})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("app/application/routers/application_router",["underscore","jquery","backbone","app/common","app/page","com/jquery/jquery.pjax"],function(e,n,r,i,s){var o,u;return o=function(e){function r(){return u=r.__super__.constructor.apply(this,arguments),u}return t(r,e),r.prototype.initialize=function(e){var t=this;return this.container_id="#container_id",this.side_id="#side_id",n(document).on("click","a.pjaxable",function(e){return t.navigate(n(e.target).attr("href"),!0),!1})},r.prototype.routes={"":"show_index",about:"show_about",version:"show_version",repos:"show_repos","repos/:github_user_id/:github_repo_name":"show_repo",user_status:"show_user_status","MIT-LICENSE.:suffix":"show_mit_license"},r.prototype.show_index=function(){return this.load_contents("/")},r.prototype.show_about=function(){return this.load_contents("/about")},r.prototype.show_version=function(){return this.load_contents("/version")},r.prototype.show_user_status=function(){return this.load_contents("/user_status")},r.prototype.show_mit_license=function(e){return this.load_contents("/MIT-LICENSE."+e)},r.prototype.show_repos=function(){return this.page_view=new s.Views.UserReposView({repositories:{github_user_id:i.Utils.get_login_user().github_user_id}}),this.load_contents("/repos")},r.prototype.show_repo=function(e,t){return this.page_view=new s.Views.UserRepoView({issues_labels:{github_user_id:e,github_repo_name:t}}),this.load_contents("/repos/"+e+"/"+t)},r.prototype.load_contents=function(e){var t=this;return n.pjax({url:e,container:"#container"}).done(function(){n("#page-view").append(t.page_view.el);if(n(t.page_view.el).size()>0)return t.page_view.render()})},r}(r.Router)})}.call(this),function(){define("app/application/routers",["./routers/application_router"],function(e){var t;return t=function(){function t(){}return t.ApplicationRouter=e,t}()})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("app/application/views/application_view",["underscore","jquery","backbone","app/common"],function(e,n,r,i){var s,o;return s=function(r){function i(){return o=i.__super__.constructor.apply(this,arguments),o}return t(i,r),i.prototype.el="#application-view",i.prototype.initialize=function(){return e.bindAll(this,"render")},i.prototype.render=function(){return n(this.el).removeClass("view").addClass("view"),n(this.el).removeClass("application-view").addClass("application-view"),this},i}(r.View)})}.call(this),function(){define("app/application/views",["./views/application_view"],function(e){var t;return t=function(){function t(){}return t.ApplicationView=e,t}()})}.call(this),function(){define("app/application",["./application/routers","./application/views"],function(e,t){var n;return n=function(){function n(){}return n.Routers=e,n.Views=t,n}()})}.call(this),function(){requirejs.config({baseUrl:"/lib"}),requirejs(["app/js/config"],function(){return requirejs(["jquery","com/bootstrap/bootstrap","app/common","app/application"],function(e,t,n,r){return e(function(){var e;return e={router:new r.Routers.ApplicationRouter},Backbone.fetchCache.getCacheKey=function(e,t){var n;return n=e.constructor.name,e.github_user_id!=null&&(n+=":"+e.github_user_id),e.github_repo_name!=null&&(n+=":"+e.github_repo_name),n},Backbone.history.start({pushState:!0})})})})}.call(this),define("app/main",function(){});